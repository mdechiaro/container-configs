---
name: work
description: wine environment using fedora
config:
  environment.DBUS_SESSION_BUS_ADDRESS: /run/mount/bus
  environment.WAYLAND_DISPLAY: /run/mount/wayland-0
  user.user-data: |
    #cloud-config
    timezone: America/Chicago
    users:
    - name: user
      shell: /bin/bash
      sudo: ALL=(ALL) NOPASSWD:ALL
    runcmd:
    - dnf config-manager addrepo --from-repofile=https://dl.winehq.org/wine-builds/fedora/43/winehq.repo
    - dnf install winehq-devel
    power_state:
      delay: now
      mode: reboot
      timeout: 30
      condition: true
devices:
  dbus:
    bind: container
    connect: unix:/run/user/1000/bus
    gid: '1000'
    listen: unix:/run/mount/bus
    security.gid: '1000'
    security.uid: '1000'
    type: proxy
    uid: '1000'
  gpu:
    gid: '1000'
    type: gpu
    uid: '1000'
  network:
    name: eth0
    network: incusbr0
    type: nic
  storage:
    path: /
    pool: default
    type: disk
  wayland:
    bind: container
    connect: unix:/run/user/1000/wayland-0
    gid: '1000'
    listen: unix:/run/mount/wayland-0
    security.gid: '1000'
    security.uid: '1000'
    type: proxy
    uid: '1000'
used_by: []
